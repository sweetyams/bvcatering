(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;!function(t,e){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function($){return e($,t)}):e(t.jQuery,t)}(window,function($,n){var r,o,i,l,s,c,u,a,f,h,d,p,v,y,w,g;return r=$(n),a=t.call(n,"ontouchstart")>=0,l={horizontal:{},vertical:{}},s=1,u={},c="waypoints-context-id",d="resize.waypoints",p="scroll.waypoints",v=1,y="waypoints-waypoint-ids",w="waypoint",g="waypoints",o=function(){function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+s++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[c]=this.id,u[this.id]=this,t.bind(p,function(){var t;return e.didScroll||a?void 0:(e.didScroll=!0,t=function(){return e.doScroll(),e.didScroll=!1},n.setTimeout(t,$[g].settings.scrollThrottle))}),t.bind(d,function(){var t;return e.didResize?void 0:(e.didResize=!0,t=function(){return $[g]("refresh"),e.didResize=!1},n.setTimeout(t,$[g].settings.resizeThrottle))})}return t.prototype.doScroll=function(){var t,e=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!a||t.vertical.oldScroll&&t.vertical.newScroll||$[g]("refresh"),$.each(t,function(t,n){var r,o,i;return i=[],o=n.newScroll>n.oldScroll,r=o?n.forward:n.backward,$.each(e.waypoints[t],function(t,e){var r,o;return n.oldScroll<(r=e.offset)&&r<=n.newScroll?i.push(e):n.newScroll<(o=e.offset)&&o<=n.oldScroll?i.push(e):void 0}),i.sort(function(t,e){return t.offset-e.offset}),o||i.reverse(),$.each(i,function(t,e){return e.options.continuous||t===i.length-1?e.trigger([r]):void 0})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,e,n,r=this;return n=$.isWindow(this.element),e=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:n?0:e.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:e.top,contextScroll:n?0:this.oldScroll.y,contextDimension:n?$[g]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},$.each(t,function(t,e){return $.each(r.waypoints[t],function(t,n){var r,o,i,l,s;return r=n.options.offset,i=n.offset,o=$.isWindow(n.element)?0:n.$element.offset()[e.offsetProp],$.isFunction(r)?r=r.apply(n.element):"string"==typeof r&&(r=parseFloat(r),n.options.offset.indexOf("%")>-1&&(r=Math.ceil(e.contextDimension*r/100))),n.offset=o-e.contextOffset+e.contextScroll-r,n.options.onlyOnScroll&&null!=i||!n.enabled?void 0:null!==i&&i<(l=e.oldScroll)&&l<=n.offset?n.trigger([e.backward]):null!==i&&i>(s=e.oldScroll)&&s>=n.offset?n.trigger([e.forward]):null===i&&e.oldScroll>=n.offset?n.trigger([e.forward]):void 0})})},t.prototype.checkEmpty=function(){return $.isEmptyObject(this.waypoints.horizontal)&&$.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([d,p].join(" ")),delete u[this.id]):void 0},t}(),i=function(){function t(t,e,n){var r,o;"bottom-in-view"===n.offset&&(n.offset=function(){var t;return t=$[g]("viewportHeight"),$.isWindow(e.element)||(t=e.$element.height()),t-$(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=e,this.enabled=n.enabled,this.id="waypoints"+v++,this.offset=null,this.options=n,e.waypoints[this.axis][this.id]=this,l[this.axis][this.id]=this,r=null!=(o=this.element[y])?o:[],r.push(this.id),this.element[y]=r}return t.prototype.trigger=function(t){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete l[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,n;return(n=t[y])?(e=$.extend({},l.horizontal,l.vertical),$.map(n,function(t){return e[t]})):[]},t}(),h={init:function(t,e){var n;return e=$.extend({},$.fn[w].defaults,e),null==(n=e.handler)&&(e.handler=t),this.each(function(){var t,n,r,l;return t=$(this),r=null!=(l=e.context)?l:$.fn[w].defaults.context,$.isWindow(r)||(r=t.closest(r)),r=$(r),n=u[r[0][c]],n||(n=new o(r)),new i(t,n,e)}),$[g]("refresh"),this},disable:function(){return h._invoke.call(this,"disable")},enable:function(){return h._invoke.call(this,"enable")},destroy:function(){return h._invoke.call(this,"destroy")},prev:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){return e>0?t.push(n[e-1]):void 0})},next:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){return e<n.length-1?t.push(n[e+1]):void 0})},_traverse:function(t,e,r){var o,i;return null==t&&(t="vertical"),null==e&&(e=n),i=f.aggregate(e),o=[],this.each(function(){var e;return e=$.inArray(this,i[t]),r(o,e,i[t])}),this.pushStack(o)},_invoke:function(t){return this.each(function(){var e;return e=i.getWaypointsByElement(this),$.each(e,function(e,n){return n[t](),!0})}),this}},$.fn[w]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],h[n]?h[n].apply(this,t):$.isFunction(n)?h.init.apply(this,arguments):$.isPlainObject(n)?h.init.apply(this,[null,n]):$.error(n?"The "+n+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},$.fn[w].defaults={context:n,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},f={refresh:function(){return $.each(u,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=n.innerHeight)?t:r.height()},aggregate:function(t){var e,n,r;return e=l,t&&(e=null!=(r=u[$(t)[0][c]])?r.waypoints:void 0),e?(n={horizontal:[],vertical:[]},$.each(n,function(t,r){return $.each(e[t],function(t,e){return r.push(e)}),r.sort(function(t,e){return t.offset-e.offset}),n[t]=$.map(r,function(t){return t.element}),n[t]=$.unique(n[t])}),n):[]},above:function(t){return null==t&&(t=n),f._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return null==t&&(t=n),f._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return null==t&&(t=n),f._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return null==t&&(t=n),f._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return f._invoke("enable")},disable:function(){return f._invoke("disable")},destroy:function(){return f._invoke("destroy")},extendFn:function(t,e){return h[t]=e},_invoke:function(t){var e;return e=$.extend({},l.vertical,l.horizontal),$.each(e,function(e,n){return n[t](),!0})},_filter:function(t,e,n){var r,o;return(r=u[$(t)[0][c]])?(o=[],$.each(r.waypoints[e],function(t,e){return n(r,e)?o.push(e):void 0}),o.sort(function(t,e){return t.offset-e.offset}),$.map(o,function(t){return t.element})):[]}},$[g]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],f[n]?f[n].apply(null,t):f.aggregate.call(null,n)},$[g].settings={resizeThrottle:100,scrollThrottle:30},r.on("load.waypoints",function(){return $[g]("refresh")})})}).call(this);